")+"/robots.txt";g4[this.name]=this;iM(window,"unload",C4)||$L(window,"unload",C4)}z(B4,v1);var zfa=/^%*tp$/,Afa=/^%+tp$/;q=B4.prototype;q.be=null;q.wd=null;q.qd=null;q.Lf=1;
q.isConnected=function(){return 2==this.Lf};q.Nc=null;q.Xh=null;function Bfa(a,b){var c=a.C.ifrid;c||(c=a.C.ifrid="xpcpeer"+h4(4));var d=tu(b).createElement("IFRAME");d.id=d.name=c;d.style.width=d.style.height="100%";D4(a);a.wd=new kS(void 0,a);var e=Cfa(a);ON(a.F,d,"load",a.wd.Ha,!1,a.wd);np||op?window.setTimeout(v(function(){b.appendChild(d);ko(d,k4(e.toString()))},a),1):(ko(d,k4(e.toString())),b.appendChild(d))}function D4(a){a.wd&&(a.wd.cancel(),a.wd=null);a.G.length=0;QN(a.F)}
function Cfa(a){var b=a.C.pu;typeof b===p&&(b=a.C.pu=new BS(b));var c={};c.cn=a.name;c.tp=a.C.tp;c.osh=a.C.osh;a.C.lru&&(c.pru=a.C.lru);a.C.lpu&&(c.ppu=a.C.lpu);a.C.ppu&&(c.lpu=a.C.ppu);(a=a.C.role)&&(c.role=1==a?0:1);KS(b,"xpc",LQ(c));return b}q.connect=function(a){this.H=a||fl;3==this.Lf&&(this.Lf=1);this.wd?qS(this.wd,this.Ol):this.Ol()};
q.Ol=function(){this.wd=null;this.C.ifrid&&(this.Xh=this.D.M(this.C.ifrid));if(this.Xh){var a=this.Xh.contentWindow;a||(a=window.frames[this.C.ifrid]);this.Nc=a}if(!this.Nc){if(window==window.top)throw Error("CrossPageChannel: Can't connect, peer window-object not set.");this.Nc=window.parent}if(!this.qd){this.C.tp||(this.C.tp=kl(document.postMessage)||kl(window.postMessage)||A&&window.postMessage?1:0);if(kl(this.C.tp))this.qd=new this.C.tp(this,this.D);else switch(this.C.tp){case 1:this.qd=new t4(this,
this.C.ph,this.D,!!this.C.osh,this.C.nativeProtocolVersion||2);break;case 3:if(a=this.Nc)try{a=window.document.domain==this.Nc.document.domain}catch(b){a=!1}a&&(this.qd=new m4(this,this.D))}if(!this.qd)throw Error("CrossPageChannel: No suitable transport found! You may try injecting a Transport constructor directly via the channel config object.");}for(this.qd.connect();0<this.G.length;)this.G.shift()()};q.close=function(){D4(this);this.Lf=3;XI(this.qd);this.H=this.qd=null;XI(this.be);this.be=null};
function s4(a,b){a.isConnected()||a.be&&0!=a.be.Kd||(a.Lf=2,XI(a.be),void 0!==b?(a.be=new CN(a.H,b),a.be.start()):(a.be=null,a.H()))}q.send=function(a,b){if(this.isConnected()){try{var c=!!this.Nc&&!this.Nc.closed}catch(d){c=!1}c?(ll(b)&&(b=LQ(b)),this.qd.send(Dfa(a),b)):this.close()}};
q.bh=function(a,b,c){this.wd?this.G.push(v(this.bh,this,a,b,c)):x4(this,c)&&!this.Pa()&&3!=this.Lf&&(a&&"tp"!=a?this.isConnected()&&(a=a.replace(/%[0-9a-f]{2}/gi,decodeURIComponent),a=Afa.test(a)?a.substring(1):a,w1(this,a,b)):this.qd.yo(b))};function Dfa(a){zfa.test(a)&&(a="%"+a);return a.replace(/[%:|]/g,encodeURIComponent)}function o4(a){var b=a.C.role;return typeof b===nj?b:window.parent==a.Nc?1:0}function n4(a,b){delete g4[a.name];a.name=b;g4[b]=a}
function x4(a,b){var c=a.C.ph;return Pm(Ao(b))||Pm(Ao(c))||b==a.C.ph}q.W=function(){this.close();this.Xh=this.Nc=null;delete g4[this.name];XI(this.F);delete this.F;B4.T.W.call(this)};function C4(){for(var a in g4)XI(g4[a])};function E4(a){R.call(this);this.G=a;this.D=this.C=null}r(E4,R);
function Efa(a){if(a.C)return a.C;var b=LP(a.G),c=b.tj;if(void 0!==c)return c&&(a.C=new t1(c),S(a,a.C)),a.C;if(b.Tl){c=k3();var d=new vfa,e=new F2,f=new zQ;f.C=!1;f.D=!1;f.G=!1;f.F=0;f.H=c;var h=new AQ;h.H=f.H;h.C=f.C;h.D=f.D;h.G=f.G;h.F=f.F;d=new $2(d,void 0,void 0,void 0,e,void 0,void 0,h);if(e=b.uj)f=d.G,Nm(e,"https://")||Nm(e,gi),Nm(e,"/"),Om(e,"/"),f.G=e;(f=b.Fo)&&d3(d,f);b.em&&H2(d.G,"anon",vk);(f=b.an)&&H2(d.G,"invite",f);f=null;if(b.yh){f=new x2;h=b.Wa().getId();f.X=h;h=d.D;var k=f;h.C=k;
var l=v(h.J,h);k.O=l;null!=k.F&&k.O(D2(k));k.subscribe(ok,h.F);h.H();A2(f,b.xh,c,e)}b=new i3(d,!0,["id",b.xh],f,null!=b.xg?b.xg:6E4,b,c);S(b,d);a.C=new t1(b);S(a,a.C);S(a,b);return a.C}b=b.Ln;if(!b)throw Error("Peer missing.");c={};d=new BS(window.location.href);(e=d.D.get("docos-tp"))&&(c.tp=parseInt(e,10));"/"==b.charAt(0)&&(b=d.resolve(new BS(b)).toString());d=k3();b=KS(new BS(b),"ctoken",d).toString();c.pu=b;a.D=Nu(Qg);a.D.style.display=kj;document.body.appendChild(a.D);b=new B4(c);Bfa(b,a.D);
b.connect();b=new f4(b);c=fT(a.G);b=new x1(b,d,c);c=new j3(b);a.C=new t1(c);S(a,a.C);S(a,c);S(a,b);return a.C}E4.prototype.W=function(){delete this.C;this.D&&(document.body.removeChild(this.D),this.D=null);R.prototype.W.call(this)};function F4(a,b,c){U.call(this);this.C=a;this.da=b;this.O=c||null;this.H=new MN(this);S(this,this.H);this.J=a.get(fj);this.L=!0;this.G=lj;this.F=!1;this.K=this.D=this.V=null;this.R=new qJ(this);S(this,this.R);this.H.Y(this.J,"r",this.pv).Y(this.J,"u",this.Nv).Y(this.J,"e",this.$u);this.H.Y(T(a),["dd"],this.Ft).Y(T(a),"bu",this.Et)}r(F4,U);
function G4(a,b){switch(a.G){case oi:return a.D;case rd:return H4(a,b),a.D;case lj:return a.D||(a.D=new kS),a.G=oi,H4(a,b),a.D;default:throw Error("Invalid status: "+a.G);}}function H4(a,b){a.F?a.G=rd:(a.G=oi,a.vo(b))}function I4(a,b,c){c=void 0===c?null:c;var d=a.D;a.D=null;a.G=lj;b?d.Cg(null):d.Ha(c)}q=F4.prototype;
q.vo=function(a){for(var b=T(this.C),c=GR(b),d=[],e=0;e<c.length;e++){d.push(hq(c[e].G));var f=c[e].getId();Ml(b.F,f)}b=new wO;d=cq(b,1,d);this.K&&F(d,2,this.K);LP(this.C).kb&&(b=LP(this.C).kb,F(d,5,b));lR(this.J,"sync",d,v(this.Uu,this),v(this.Tu,this),!1,a?a:void 0)};q.Tu=function(){this.L=!1;I4(this,!0)};q.$u=function(){this.dispatchEvent(ej)};
q.Uu=function(a){a=new xO(a);var b=this.L;this.L=!1;var c=y();if(b){var d=J4(this.da,Ui);d&&d((new Ko(Ui)).C())}d=T(this.C);try{if(Ffa(this,a,b),this.K=D(a,2),Jba(d))AN(v(this.vo,this));else{var e=y()-c;I4(this,!1,b?e:void 0);this.O&&this.O.C("dscat",e,void 0)}}catch(f){throw AN(function(){throw f;}),f;}};
function Ffa(a,b,c){var d=T(a.C),e=FR(d),f=Zp(b,aK,1);b=0<f.length;var h=T(a.C),k=[];f=Qk(f);for(var l=f.next();!l.done;l=f.next()){l=hq(l.value);var m=iK(l),x=AR(h,m.getId(),D(m,11));m=!0;if(x)a:{var w=a,B=T(w.C);m=iK(l);delete e[x.getId()];var C=x.getId();if(Jl(B.F,C))m=!1;else{C=x.getId();if(C=Jl(B.Z,C)){if(aL(x.C)){K4(w,x);m=!1;break a}w=x.getId();Ml(B.Z,w)}F(l,9,!1);F(m,12,!1);void 0===D(m,13)&&F(m,13,0);x=nm(x.D);B=Qk(gK(m));for(w=B.next();!w.done;w=B.next())w=w.value,F(w,12,!1),void 0===D(w,
13)&&F(w,13,0),delete x[w.getId()||""],delete x[D(w,11)||""];B=[];w=Qk(Object.keys(x));for(C=w.next();!C.done;C=w.next())B.push(Gfa(hq(x[C.value].C)));x=gK(m);cq(m,8,Ol(x,B));m=!0}}m&&k.push(new wL(l))}qQ(h,k,"n");h=Qk(GR(d));for(k=h.next();!k.done;k=h.next())k=k.value,aL(k.C)&&void 0===k.C.C.getId()&&K4(a,k);if(c)for(a=Qk(Object.keys(e)),h=a.next();!h.done;h=a.next())h=e[h.value],sL(h)||void 0===h.C.C.getId()&&!aL(h.C)||(b=!0,h=hq(h.G),iK(h),k=iK(h),cq(k,8,[]),F(k,13,y()),F(k,12,!1),F(h,9,!1),kQ(d,
new wL(h),"n"));b&&d.flush(c)}function K4(a,b){a=T(a.C);var c=hq(b.G),d=iK(c);F(c,9,!1);F(d,12,!1);b=b.getId();Ml(a.F,b);kQ(a,new wL(c),"n")}function Gfa(a){F(a,13,y());F(a,12,!1);return a}q.pv=function(){var a=12E4*Math.random();null!==this.V&&BN(this.V);this.V=AN(function(){G4(this,LP(this.C).Yh?1:void 0)},a,this)};
q.Nv=function(a){if(a.te){var b=a.te;a=T(this.C);var c=0;b=Zp(b,aK,1);b=Qk(b);for(var d=b.next();!d.done;d=b.next()){d=hq(d.value);var e=iK(d);e=AR(a,e.getId(),D(e,11));e&&e.Ve()||(kQ(a,new wL(d),"n"),c++)}0<c&&T(this.C).flush()}};q.Ft=function(a){"n"!=a.H&&zR(T(this.C))&&G4(this)};q.Et=function(a){"n"!=a.source&&zR(T(this.C))&&G4(this)};q.W=function(){U.prototype.W.call(this);delete this.C;delete this.H;delete this.R};function L4(a,b,c){R.call(this);this.F=a;this.C=b;this.G=c;this.J=new MN(this);S(this,this.J);this.D=null;this.L=!1;this.H=null}r(L4,R);function M4(a){if(!AS(a.F,fj))return!1;a.D=new F4(a.F,a.G,a.C.L||void 0);S(a,a.D);a.J.Y(a.D,ej,a.V);return!0}L4.prototype.V=function(){N4(this.G,"fe")};function O4(a){a.L=!0;a.H=y();var b=qS(G4(a.D,a.C.Hj?1:void 0),a.K,a);rS(b,null,a.O,a)}function Hfa(a){if(rP(a.C)){var b=a.D.D;b?qS(b,function(){return P4(a)}):P4(a)}}
L4.prototype.K=function(a){var b=this.C.L;if(b){var c=NP(T(this.F)).C.clone().F();b.D&&b.D(c)}(b=J4(this.G,ek))&&b((new Ko(ek)).C());(b=J4(this.G,ri))&&null!==a&&b(new cp(ri,a));(a=J4(this.G,ui))&&a(new cp(ui,y()-this.H));N4(this.G,"s");N4(this.G,"r")};L4.prototype.O=function(){var a=J4(this.G,dk);a&&a((new Ko(dk)).C());N4(this.G,"e")};function P4(a){a.D.K=null;G4(a.D,a.C.Yh?1:void 0)};function Q4(a,b,c){this.key=a;this.data=b;this.C=c;this.key=this.key;this.data=this.data;this.dirty=this.C}u("docos.api.StorageUpdate",Q4,void 0);function R4(a,b){if(a){b||a.unshift(void 0);S4(a[2],b);var c=a[5];c&&(b||c.unshift(void 0),T4(c[2],b),R4(c[3],b),b&&c.shift());b&&a.shift()}}function T4(a,b){a&&(b?a.shift():a.unshift(void 0))}
function S4(a,b){if(a){b||a.unshift(void 0);T4(a[3],b);T4(a[4],b);var c=a[5];c&&(b?c.shift():c.unshift(void 0));if(c=a[14]){b||c.unshift(void 0);var d=c[3];d&&(b?d.shift():d.unshift(void 0));(d=c[7])&&(b?d.shift():d.unshift(void 0));b&&c.shift()}if(a[8])for(c=0;c<a[8].length;c++)S4(a[8][c],b);(c=a[9])&&(b?c.shift():c.unshift(void 0));if(c=a[18])b||c.unshift(void 0),(d=c[1])&&(b?d.shift():d.unshift(void 0)),b&&c.shift(