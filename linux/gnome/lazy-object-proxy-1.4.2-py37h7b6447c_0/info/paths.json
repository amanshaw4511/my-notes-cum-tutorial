=this.item.zj;if(e){var f=c.imageMediaMetadata;f&&(e.wa=new os(f.width,f.height));t3.prototype.ha.call(this,b,c,d)}};
var Gjl=function(b){vy.call(this);this.Aa=this.wa=Ds(b.Qa().getWindow())};F(Gjl,vy);Gjl.prototype.zd=function(){return this.wa.clone()};Gjl.prototype.Ba=function(){return this.Aa.clone()};Gjl.prototype.setSize=function(b,c,d){(!ps(b,this.wa)||!ps(c,this.Aa))&&0<=b.height&&0<=b.width&&(this.wa=b,this.Aa=c,this.dispatchEvent(new Hjl(d)))};var jhl=function(){var b=Es(),c=fs&&LHa;return void 0===b.devicePixelRatio||c?dJa():b.devicePixelRatio};Gjl.prototype.ha=function(){return jhl()||1};
var Hjl=function(b){ny.call(this,"$t");this.ha=b};F(Hjl,ny);
var Ijl=function(b,c){v3.call(this,b,c);this.item=b;this.wa=this.ha=null;this.Ba=!1;b=this.getContext().fu();this.yg.listen(this.item,"tt",this.bwc).listen(b,"$t",this.Ca)};D(Ijl,v3);Ijl.prototype.EZ=function(){this.Aa()};Ijl.prototype.Ca=function(){var b=this.item.getState();0!=b&&4!=b&&(3==b&&this.ha&&this.ha.cancel(),Ty(this.wa),this.wa=Sy(this.Aa,400,this))};
var Kjl=function(b){var c=3==b.getContext().Vb().Co()?b.getContext().fu().Ba():b.getContext().fu().zd();sIa(c,b.getContext().fu().ha());c=Jjl(c,HZk);c=Jjl(c,b.item.Ob);b=b.item.Cb();if(c.width<b.width||c.height<b.height||ps(c,b))return null;c.floor();return c},Ljl=function(b,c){return ybl(b.item)?b.item.Da():b.item.Da(c.width,c.height)};
Ijl.prototype.Aa=function(){var b=this;if(!this.item.od){var c=Kjl(this);if(c){var d=this.item.qc;!this.Ba&&d?(this.Ba=!0,Mjl(this,d)):(d=Ljl(this,c),d=Njl(this,d),this.item.Fb||B(this.item.ha,41)?(this.ha=new SV,d().then(function(e){return b.ha&&b.ha.Bc(e)},this.Ea,this)):this.ha=Dyg(d,C(this.u_c,this),void 0,void 0,zbl(this.item)?2:void 0),TV(this.ha,C(this.JDb,this,c),this),UV(this.ha,this.$Mc,this),scl(this,this.ha))}}};var Mjl=function(b,c){Hcl(c).then(function(d){b.JDb(new os(0,0),d)},function(){b.Aa()})};
Ijl.prototype.Ea=function(){this.item.Fb?Ojl(this):B(this.item.ha,41)&&Pjl(this)};
var Pjl=function(b){Jcl(B(b.item.ha,41),void 0,void 0,void 0,void 0,!0).wait(function(c){b.ha&&(c.getError()?b.ha.qg(c.getError()):(c=c.Yb().DN($ca))?Qjl(b,c.rd):b.ha.qg(Error("Dqa")))})},Ojl=function(b){if(b.item){var c=b.item.Fb;c&&c(2).then(function(d){return Qjl(b,d)})}},Qjl=function(b,c){Q(b.item.ha,4,c);c=Kjl(b);!c&&b.ha?b.ha.cancel():Njl(b,Ljl(b,c))().then(function(d){return b.ha&&b.ha.Bc(d)},function(d){return b.ha&&b.ha.qg(d)})},Njl=function(b,c){var d=b.getContext().Qa();var e=b.getContext().Vb();
if(wZk(e))b=!1;else{b=Cjl(b.item.getMimeType());if(e=ZB(e,63,!1))e=window.location,e=!Jx(c)||SWk(c,e.href)||IM(c)?!0:!1;b=e&&!Oq(Rjl,b)}return b?(b=!IM(c)&&!(c&&l0a(c,In)),tq(Kcl,c,d,b,!0)):tq(Icl,c,d)},Jjl=function(b,c){return new os(Math.min(b.width,c.width),Math.min(b.height,c.height))};v=Ijl.prototype;
v.bwc=function(){if(!this.item.Ia()){var b=this.getContext().Qa(),c=this.item.Va();this.item.Gw(2);b=Dyg(tq(Njl(this,c),c,b),C(this.Z0c,this),void 0,void 0,zbl(this.item)?2:void 0);TV(b,this.$0c,this);UV(b,this.Y0c,this);scl(this,b)}};
v.JDb=function(b,c){var d=c.getData();b&&d.naturalWidth<b.width&&d.naturalHeight<b.height&&(this.item.Ob=(new os(d.naturalWidth,d.naturalHeight)).clone());b=this.item.Cb();d.naturalWidth<=b.width&&d.naturalHeight<=b.height?c.S3&&(c=c.S3,CFa().revokeObjectURL(c)):(this.item.Me(1),d=this.item,d.Ca=c,d.wb(c),d.dispatchEvent(vn),ybl(this.item)&&Abl(this.item,c))};v.u_c=function(){this.item.Ba()||this.item.Me(3,f3k)};v.$Mc=function(){this.item&&!this.item.Ba()&&this.ha&&!this.ha.pA()&&this.item.Me(4,f3k)};
v.$0c=function(b){Abl(this.item,b);this.item.Gw(1)};v.Z0c=function(){this.item.Gw(3)};v.Y0c=function(){this.item.Gw(4)};v.mb=function(){Ty(this.wa);v3.prototype.mb.call(this)};var Rjl=[Xhl,Yhl,fil,Til,Bil,wil,zil,Lil];
var Sjl=function(b,c){u3.call(this,void 0===c?"i":c,b)};D(Sjl,u3);v=Sjl.prototype;v.vt=function(b){return i3(b)+b.getName()+(bq(b,4,"")?bq(b,4,""):b.Cl())};v.Yt=function(b){return!!b.getName()&&(!!bq(b,4,"")||!!b.Cl())};v.Tv=function(){var b=[loa,J5k,pua],c=Xq(yjl.ha);Yq(b,Djl(c));ZB(this.getContext().Vb(),18,!0)||b.push(yoa);return b};v.Ky=function(){return r3};v.kB=function(){return this.getContext().Nc(DLk)};v.Zz=function(){return Ijl};v.iVa=function(){return Fjl};
v.wna=function(){return this.getContext().Vb().vsb()?o$k:null};v.Eba=function(){return Ejl};
var Tjl=function(b){Sjl.call(this,b,"i_d")};D(Tjl,Sjl);Tjl.prototype.vt=function(b){return i3(b)+A2(b)};Tjl.prototype.Yt=function(b){return!!b.getName()&&(!!bq(b,4,"")||!!b.Cl())&&!!A2(b)};Tjl.prototype.Ow=function(){return[0]};
var Ujl=new R8k;
var Wjl=function(b,c){wt.call(this);this.Ba=b.get(VKk);this.ha=new Vjl(c);this.wa=[];this.Aa={}};F(Wjl,wt);
var bkl=function(b,c,d,e){var f=!!d;d=[];for(var g=0;g<c.length;g++){var k=c[g],l=Xjl(b.Ba,k);b.ha.Hc(l)&&(l=b.ha.get(l),l.jC(k),d[g]=l)}for(g=c.length-1;0<=g;g--){var n=c[g];k=Xjl(b.Ba,n);var q=e&&g<e.length?e[g]:null;l=g;var u;if(!(