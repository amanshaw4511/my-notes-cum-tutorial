his.v=this.j=this.w=this.g=null;this.o=!1};var Ei=new hi(function(){return new Di},function(a){a.reset()});function Fi(a,b,c){var d=Ei.get();d.w=a;d.j=b;d.v=c;return d}
function Gi(a){if(a instanceof R)return a;var b=new R(Ia);Ci(b,2,a);return b}function Hi(a){return new R(function(b,c){c(a)})}function Ii(a,b,c){Ji(a,b,c,null)||wi(Ta(b,a))}function Ki(a){return new R(function(b,c){a.length||b(void 0);for(var d=0,e;d<a.length;d++)e=a[d],Ii(e,b,c)})}function Li(a){return new R(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,l;h<a.length;h++)l=a[h],Ii(l,Ta(f,h),g);else b(e)})}
function Mi(a){return new R(function(b){var c=a.length,d=[];if(c)for(var e=function(h,l,m){c--;d[h]=l?{Zc:!0,value:m}:{Zc:!1,reason:m};0==c&&b(d)},f=0,g;f<a.length;f++)g=a[f],Ii(g,Ta(e,f,!0),Ta(e,f,!1));else b(d)})}function Ni(){var a,b,c=new R(function(d,e){a=d;b=e});return new Oi(c,a,b)}R.prototype.then=function(a,b,c){return Pi(this,Ma(a)?a:null,Ma(b)?b:null,c)};R.prototype.$goog_Thenable=!0;function Qi(a,b){b=Fi(b,b,void 0);b.o=!0;Ri(a,b);return a}function Si(a,b,c){return Pi(a,null,b,c)}
R.prototype.cancel=function(a){if(0==this.g){var b=new Ti(a);wi(function(){Ui(this,b)},this)}};function Ui(a,b){if(0==a.g)if(a.o){var c=a.o;if(c.j){for(var d=0,e=null,f=null,g=c.j;g&&(g.o||(d++,g.g==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.g&&1==d?Ui(c,b):(f?(d=f,d.next==c.v&&(c.v=d),d.next=d.next.next):Vi(c),Wi(c,e,3,b)))}a.o=null}else Ci(a,3,b)}function Ri(a,b){a.j||2!=a.g&&3!=a.g||Xi(a);a.v?a.v.next=b:a.j=b;a.v=b}
function Pi(a,b,c,d){var e=Fi(null,null,null);e.g=new R(function(f,g){e.w=b?function(h){try{var l=b.call(d,h);f(l)}catch(m){g(m)}}:f;e.j=c?function(h){try{var l=c.call(d,h);void 0===l&&h instanceof Ti?g(h):f(l)}catch(m){g(m)}}:g});e.g.o=a;Ri(a,e);return e.g}R.prototype.K=function(a){this.g=0;Ci(this,2,a)};R.prototype.L=function(a){this.g=0;Ci(this,3,a)};
function Ci(a,b,c){0==a.g&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.g=1,Ji(c,a.K,a.L,a)||(a.B=c,a.g=b,a.o=null,Xi(a),3!=b||c instanceof Ti||Yi(a,c)))}function Ji(a,b,c,d){if(a instanceof R)return Ri(a,Fi(b||Ia,c||null,d)),!0;if(Bi(a))return a.then(b,c,d),!0;if(Na(a))try{var e=a.then;if(Ma(e))return Zi(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1}
function Zi(a,b,c,d,e){function f(l){h||(h=!0,d.call(e,l))}function g(l){h||(h=!0,c.call(e,l))}var h=!1;try{b.call(a,g,f)}catch(l){f(l)}}function Xi(a){a.A||(a.A=!0,wi(a.C,a))}function Vi(a){var b=null;a.j&&(b=a.j,a.j=b.next,b.next=null);a.j||(a.v=null);return b}R.prototype.C=function(){for(var a;a=Vi(this);)Wi(this,a,this.g,this.B);this.A=!1};
function Wi(a,b,c,d){if(3==c&&b.j&&!b.o)for(;a&&a.w;a=a.o)a.w=!1;if(b.g)b.g.o=null,$i(b,c,d);else try{b.o?b.w.call(b.v):$i(b,c,d)}catch(e){aj.call(null,e)}ii(Ei,b)}function $i(a,b,c){2==b?a.w.call(a.v,c):a.j&&a.j.call(a.v,c)}function Yi(a,b){a.w=!0;wi(function(){a.w&&aj.call(null,b)})}var aj=ni;function Ti(a){Wa.call(this,a)}z(Ti,Wa);Ti.prototype.name="cancel";function Oi(a,b,c){this.g=a;this.resolve=b;this.reject=c};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function S(a,b){this.B=[];this.O=a;this.G=b||null;this.v=this.g=!1;this.o=void 0;this.F=this.P=this.K=!1;this.C=0;this.j=null;this.A=0}r=S.prototype;r.cancel=function(a){if(this.g)this.o instance