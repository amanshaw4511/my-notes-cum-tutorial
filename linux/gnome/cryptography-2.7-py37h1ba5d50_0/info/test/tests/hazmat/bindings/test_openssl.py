,i=n(314),s=d(n(368)),l=d(n(11));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showTimer:!0,data:"",regFormId:"",extraData:""},n.doesMCVerified=n.doesMCVerified.bind(n),n.verifyCall=n.verifyCall.bind(n),n.getCounter=0,n.trackMissedCall=n.trackMissedCall.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),o(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"doesMCVerified",value:function(){var e=this,t="email="+this.props.extraData.email+"&mobile="+this.props.formData.mobile.value+"&isd="+this.props.formData.isdCode.value;if(this.getCounter++,(0,i.doesMCVerified)(t).then(function(t){1==t&&(e.setState({showTimer:!1}),e.trackResponseEvent(e.state.extraData.trackingKeyId,"OTPPage_VerficationSuccessful"),clearInterval(window.missCallInterval),void 0!=e.state.extraData.responseCreationData?(0,i.createResponse)(e.state.extraData.responseCreationData).then(function(t){1==t&&(e.setState({loader:!1}),document.getElementById("newLoader").style.display="none",e.props.onVerification("responseCreated"))}):(e.setState({loader:!1}),document.getElementById("newLoader").style.display="none",e.props.onVerification()))}),24==this.getCounter)return clearInterval(window.missCallInterval),this.getCounter=0,void this.setState({showTimer:!1})}},{key:"verifyCall",value:function(){this.trackMissedCall(),window.missCallInterval=setInterval(function(){this.doesMCVerified()}.bind(this),5e3)}},{key:"render",value:function(){return r.default.createElement(r.default.Fragment,null,this.state.showTimer&&r.default.createElement("div",null,r.default.createElement("p",{className:"textCenter"},"This session will expire in"),r.default.createElement("div",{className:"textCenter"},r.default.createElement("span",{className:"clock"},r.default.createElement("strong",null,r.default.createElement(s.default,null)))),r.default.createElement("p",{className:"textCenter"},"Give a missed call to ",r.default.createElement("a",{href:"tel:+91-9212662010"},"+91-9212662010")),r.default.createElement("p",{className:"textCenter"},"from your mobile number (+",this.props.formData.isdCode.value+"-"+this.props.formData.mobile.value,")"),r.default.createElement("div",null,r.default.createElement("p",{className:"textCenter light small"},"This call is free of charge & it will ",r.default.createElement("br",null),"automatically disconnect"))),!this.state.showTimer&&r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("p",{className:"textCenter"},r.default.createElement("span",{className:"redtext boldmsg"},"Oops! The mobile number verification failed.")))),r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("p",{className:"textCenter"},"Ensure you have given missed call from your ",r.default.createElement("br",null),"mobile number (+",this.props.formData.isdCode.value+"-"+this.props.formData.mobile.value,")")),r.default.createElement("div",{className:"button-box"},r.default.createElement("button",{className:"button button--secondary",onClick:this.startTimer.bind(this)},"Try again"))),r.default.createElement("div",null)),this.state.showTimer&&this.verifyCall())}},{key:"startTimer",value:function(){this.setState({showTimer:!0}),this.trackResponseEvent(this.props.extraData.trackingKeyId,"MissCall_TryAgain_Button_Click")}},{key:"trackMissedCall",value:function(){var e={};e.userId=this.props.extraData.userId,e.emailId=this.props.extraData.email,e.mobile=this.props.formData.mobile.value,e.isdCode=this.props.formData.isdCode.value,e.regFormId=this.props.regFormId,e.trackingKeyId=this.props.extraData.trackingKeyId,e.isResend=this.props.resentCount,e.isChangeNumber="no",e.verification="MC",e.isNewUser=!1,e.siteSource="National",(0,i.trackMissCall)(e).then(function(e){})}},{key:"trackResponseEvent",value:function(e,t){var n,o="";if(void 0==this.props.en